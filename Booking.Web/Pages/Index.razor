@page "/"
@using Booking.BussinesLogic.Handlers.GetHotelsList
@using System.ComponentModel.DataAnnotations
@using System.Threading
@using Booking.DataLayer
@using Booking.DataLayer.Entities
@using Booking.DataLayer.Extensions
@using MediatR
@using Microsoft.EntityFrameworkCore

@inject IMediator _mediator;
@inject BookingDbContext _dbContext;
@inject NavigationManager _navigationManager;

<body>
<div class="intro">
		<div class="container">
			<div class="intro-inner">
				<h2 class="intro-subtitle">Creative tools</h2>
			<h1 class="intro-title">Welcome to TravelGo</h1>
			<a href="/hotels" class="but-learn">К поиску отелей</a>
		</div><!-- /intro-inner -->
		<div class="intro-slider">
			<div class="slider-item active"><b class="slider-number">01</b> Intro</div>
			<div class="slider-item"><b class="slider-number">02</b> Work</div>
			<div class="slider-item"><b class="slider-number">03</b> About</div>
			<div class="slider-item"><b class="slider-number">04</b> Contact</div>
		</div><!-- /intro-slider -->
		</div><!-- /container -->
	</div>	<!-- /intro -->


	<section class="section">
		<div class="container">


			<div class="section-header">
				<h3 class="section-subtitle">What we do</h3>
				<h2 class="section-title">Story about us</h2>
			</div>
			<div class="section-text">
				<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. In maxime aliquam cum. Odit veniam sit pariatur quasi, laudantium repellendus id consequuntur mollitia placeat accusantium obcaecati maxime ex distinctio itaque, praesentium..</p>
			</div>


			<div class="about">
				<div class="about-item">
					<div class="about-img">
						<img src="img/computer.png" alt="Computer">
					</div>
					<div class="about-text-pic">
					<div class="about-text">Super Team</div>
					<div class="about-pic">
						<img src="img/USERS.png" alt="">
					</div>
				</div>
			</div>
				<div class="about-item">
					<div class="about-img">
						<img src="img/phone.png" alt="Phone">
					</div>
					<div class="about-text-pic">
					<div class="about-text">Super Team</div>
					<div class="about-pic">
						<img src="img/USERS.png" alt="">
					</div>
				</div>
				</div>
				<div class="about-item">
					<div class="about-img">
						<img src="img/table.png" alt="Table">
					</div>
					<div class="about-text-pic">
					<div class="about-text">Super Team</div>
					<div class="about-pic">
						<img src="img/USERS.png" alt="">
					</div>
					</div><!--/about-text-pic  -->
				</div><!-- /about-item -->
			</div><!-- /about -->
		</div><!-- /container -->
	</section>

	<div class="statistics">
		<div class="container">
			<div class="stat">
				<div class="stat-item">
					<div class="stat-count">42</div>
					<div class="stat-text">happy client</div>
				</div>
				<div class="stat-item"><div class="stat-count">123</div>
					<div class="stat-text">happy client</div></div>
				<div class="stat-item"><div class="stat-count">15</div>
					<div class="stat-text">Award winner</div></div>
				<div class="stat-item"><div class="stat-count">99</div>
					<div class="stat-text">Cup of coffee</div></div>
				<div class="stat-item"><div class="stat-count">24</div>
					<div class="stat-text">Members</div></div>
			</div><!-- /stat -->
		</div><!-- /container -->
	</div><!-- /statistics -->


	<div class="section">
		<div class="container">
		<div class="section-header">
			<h3 class="section-subtitle">We work with</h3>
			<h2 class="section-title">Amazing Services</h2>
		</div><!-- /section-header -->
		<div class="section-objects">
			<div class="sec-obj1">
				<div class="obj">
					<div class="obj-pic"><img src="img/sec-obj/1.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">Photography</div>
						<div class="sec-text2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor.</div>
					</div>
				</div>
				<div class="obj"><div class="obj-pic"><img src="img/sec-obj/2.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">Web design</div>
						<div class="sec-text2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor.</div>
					</div></div>
				<div class="obj"><div class="obj-pic"><img src="img/sec-obj/3.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">Creativity</div>
						<div class="sec-text2">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor.</div>
					</div></div>
			</div><!-- /sec-obj1 -->


			<div class="sec-obj1">
				<div class="obj">
					<div class="obj-pic"><img src="img/sec-obj/4.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">SEO</div>
						<div class="sec-text2">Ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod.</div>
					</div>
				</div>
				<div class="obj"><div class="obj-pic"><img src="img/sec-obj/5.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">CSS/HTML</div>
						<div class="sec-text2">Lorem dolor sit amet, consectetur adipiscing elit, sed do tempor.</div>
					</div></div>
				<div class="obj"><div class="obj-pic"><img src="img/sec-obj/6.png" alt=""></div>
					<div class="sec-text">
						<div class="sec-text1">Digital</div>
						<div class="sec-text2">Sit amet, consectetur adipiscing elit, sed do eiusmod tempor.</div>
					</div></div>
			</div><!-- /sec-obj1 -->
		</div>
	</div><!-- /container -->
	</div><!-- /section -->


	<div class="section section--device">
		<div class="container">
				<div class="section-header">
					<h3 class="section-subtitle">For all devices</h3>
					<h2 class="section-title">Unique design</h2>
				</div><!-- /section-header -->
				<div class="devices">
					<img src="img/Devices/ipad.png"  alt="" class="devices__item devices__item--ipad">
					<img src="img/Devices/Phone.png" alt="" class="devices__item devices__item--iphone">
				</div><!-- /devices -->
		</div><!-- /container -->
	</div><!-- /section -->

	<section class="section">
		<div class="container">


			<div class="section-header">
				<h3 class="section-subtitle">Service</h3>
				<h2 class="section-title">What we do</h2>
			</div>
			<div class="section-text">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </p>
			</div>

			<div class="whatdo">
				<div class="whatdo-item"><img src="img/WhatDo/Man.png" alt=""></div>
				<div class="whatdo-item">


					<div class="accordion">

						<div class="accardion-item">
							<div class="accordion-header">
								<img src="img/WhatDo/ic1.png" alt="" class="accordion-icon">
								<div class="accordion-title">Photography</div>
							</div><!-- /accordion-header1 -->
							<div class="accordion-content"><p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, quod exercitationem unde repellendus. Officia laborum eaque iusto voluptates quasi doloremque! Error voluptas placeat deleniti quis odit quos quisquam facere illo?</p></div>
						</div><!-- /accordion-item1 -->


						<div class="accardion-item active">
							<div class="accordion-header">
								<img src="img/WhatDo/ic2.png" alt="" class="accordion-icon">
								<div class="accordion-title">Creativity</div>
							</div><!-- /accordion-header1 -->
							<div class="accordion-content"><p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, quod exercitationem unde repellendus. Officia laborum eaque iusto voluptates quasi doloremque! Error voluptas placeat deleniti quis odit quos quisquam facere illo?</p></div>
						</div><!-- /accordion-item1 active -->


						<div class="accardion-item">
							<div class="accordion-header">
								<img src="img/WhatDo/ic3.png" alt="" class="accordion-icon">
								<div class="accordion-title">Web design</div>
							</div><!-- /accordion-header1 -->
							<div class="accordion-content"><p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates, quod exercitationem unde repellendus. Officia laborum eaque iusto voluptates quasi doloremque! Error voluptas placeat deleniti quis odit quos quisquam facere illo?</p></div>
						</div><!-- /accordion-item1 -->

							
					</div><!-- /accordion -->
				</div><!-- /whatdo-item -->
				
			</div><!-- /Whatdo -->

		</div><!-- /container -->
	</section>



</body>


@code
{
    private readonly List<Hotel> _hotels;

    [Required]
    private string City { get; set; }
    
    [Required]
    private DateTime StartDate { get; set; } = DateTime.Now;

    [Required]
    private DateTime EndDate { get; set; } = DateTime.Now;

    private List<string> citiesList;

    private void SendForm()
    {
        var request = new GetHotelsListRequest()
        {
            City = City,
            EndDate = EndDate,
            StartDate =  StartDate,
            Seats = 4,
            Type = RoomType.Comfort
        };

        _mediator.Send(request, CancellationToken.None);
        
        _navigationManager.NavigateTo("hotels");
    }
    
    protected override async Task OnInitializedAsync()
    {
        citiesList = await _dbContext.Cities
            .OnlyActive()
            .Select(x => x.Name)
            .ToListAsync();
    }
    
    void ButtonClicked()
    {
        _navigationManager.NavigateTo("hotels");
    }
}